---
# Create Kubernetes Secret for Open WebUI sensitive environment variables
# This secret contains sensitive values that should not be exposed as plain env vars

- name: Create Open WebUI secrets
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: v1
      kind: Secret
      metadata:
        name: open-webui-secrets
        namespace: '{{ chatbot_namespace }}'
      type: Opaque
      stringData:
        # WebUI secret key for session management and OAuth security
        WEBUI_SECRET_KEY: '{{ open_webui_secret_key }}'
        # OAuth client secret for Keycloak integration
        OAUTH_CLIENT_SECRET: '{{ keycloak_open_webui_client_secret }}'
        # Redis connection URL with password (for distributed state management)
        REDIS_URL: '{{ open_webui_redis_url }}'
