---
# Loki role defaults
# User-configurable settings are in inventory.yaml

# Helm configuration
loki_helm_repo_name: grafana
loki_helm_repo_url: https://grafana.github.io/helm-charts
loki_helm_timeout: 5m

# Storage configuration
loki_storage_size: 10Gi
loki_storage_class: ''

# S3 credentials for Loki storage
s3_loki_writer: loki-writer
s3_loki_writer_secret: changeme

# Resource configuration (dev defaults - CI friendly)
loki_resources_default:
  requests:
    cpu: 250m
    memory: 1Gi
  limits:
    cpu: 2
    memory: 2Gi

# Memcached cache configuration (dev defaults)
# Loki uses memcached for two caching layers:
# - chunksCache: Caches log chunks to reduce S3 fetches
# - resultsCache: Caches query results for repeated queries
# Values are in MB. The helm chart computes pod memory as allocatedMemory * 1.2
# Upstream defaults (8192MB chunks, 1024MB results) are excessive for most dev deployments
loki_chunks_cache_allocated_memory: 512 # MB (upstream default: 8192)
loki_results_cache_allocated_memory: 256 # MB (upstream default: 1024)
