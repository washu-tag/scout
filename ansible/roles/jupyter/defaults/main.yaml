---
# Jupyter role defaults
# User-configurable settings are in inventory.yaml

# Namespace
jupyter_namespace: jupyter

# Helm configuration
jupyter_helm_repo_name: jupyterhub
jupyter_helm_repo_url: https://raw.githubusercontent.com/jupyterhub/helm-chart/refs/heads/gh-pages/
jupyter_helm_chart_name: jupyterhub

# Storage configuration
jupyter_hub_name: jupyter-hub
jupyter_hub_storage_class: '{{ jupyter_hub_name }}-storage'
jupyter_hub_storage_size: 1Gi

jupyter_singleuser_name: jupyter-singleuser
jupyter_singleuser_storage_class: '{{ jupyter_singleuser_name }}-storage'
jupyter_singleuser_storage_size: 10Gi
jupyter_singleuser_pvc: '{{ jupyter_singleuser_name }}-pvc'

# Storage definitions
jupyter_storage_definitions:
  - name: '{{ jupyter_hub_name }}'
    size: '{{ jupyter_hub_storage_size }}'
    path: '{{ jupyter_dir }}/hub'
    pv_name: '{{ jupyter_hub_name }}-pv'
    storage_class_name: '{{ jupyter_hub_storage_class }}'
  - name: '{{ jupyter_singleuser_name }}'
    size: '{{ jupyter_singleuser_storage_size }}'
    path: '{{ jupyter_dir }}/singleuser'
    pv_name: '{{ jupyter_singleuser_name }}-pv'
    storage_class_name: '{{ jupyter_singleuser_storage_class }}'

# Single-user image configuration
jupyter_singleuser_image_name: ghcr.io/washu-tag/pyspark-notebook
jupyter_singleuser_image_tag: 1.1.0

# API tokens for JupyterHub services
# REQUIRED: Must be set in inventory.yaml (use vault encryption)
# Example: openssl rand -hex 32 | ansible-vault encrypt_string --vault-password-file vault/pwd.sh
jupyter_metrics_api_token: ''
jupyter_mcp_api_token: ''

# PrePuller configuration
jupyter_prepuller_continuous: false

# Spark configuration
jupyter_spark_memory: 1G

# Resource configuration (dev defaults - CI friendly)
jupyter_hub_resources:
  requests:
    cpu: 100m
    memory: 256M
  limits:
    cpu: 500m
    memory: 512M

# Single-user pod resources
# Memory defaults to jupyter_spark_memory (JupyterHub format: K, M, G, T)
# Override jupyter_singleuser_memory_* to set explicit values for non-Spark workloads
# Note: JupyterHub Helm chart 4.3.x requires numeric values (not strings like "250m")
# Use fractional cores (0.25 = 250 millicores) or whole numbers
jupyter_singleuser_cpu_request: 0.25
jupyter_singleuser_cpu_limit: 1
jupyter_singleuser_memory_request: '' # Default: jupyter_spark_memory
jupyter_singleuser_memory_limit: '' # Default: jupyter_spark_memory * 2
