---
dependency:
  name: galaxy
driver:
  name: default
platforms:
  - name: localhost
    groups:
      - k3s_cluster
      - server
provisioner:
  name: ansible
  env:
    ANSIBLE_ROLES_PATH: '../../..'
  inventory:
    host_vars:
      localhost:
        # Mock environment for testing without actual k3s installation
        ansible_connection: local
        ansible_hostname: localhost

        # k3s configuration
        k3s_token: test-token-12345
        k3s_version: v1.30.0+k3s1
        base_dir: /tmp/molecule-k3s-test
        kubeconfig_yaml: /tmp/molecule-k3s-test/kubeconfig
        kubeconfig_group: wheel

        # Test with non-air-gapped mode by default
        air_gapped: false

        # Mock paths for testing
        k3s_binary_path: /tmp/molecule-k3s-test/k3s
        k3s_install_script_path: /tmp/molecule-k3s-test/get.k3s.io.sh

        # SELinux mock (disabled for tests)
        ansible_selinux:
          status: disabled

        # Scout repo directory for kubeconfig setup
        scout_repo_dir: /tmp/molecule-scout-repo
verifier:
  name: ansible
